name: contest-platform

services:
  judge:
    build: ./judge
    ports:
      - 8128:8128
    volumes:
      - type: bind
        source: ./data
        target: /judge
    environment:
      RUST_LOG: trace
    stop_signal: SIGINT
    restart: on-failure
  web:
    build: ./web
    ports:
      - 3000:3000
    depends_on:
      - judge
    volumes:
      - type: bind
        source: ./data/contests
        target: /web/contests
        read_only: true
